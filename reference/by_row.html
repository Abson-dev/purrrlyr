<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Apply a function to each row of a data frame — by_row • purrrlyr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Apply a function to each row of a data frame — by_row" />
<meta property="og:description" content="by_row() and invoke_rows() apply ..f to each row
of .d. If ..f's output is not a data frame nor an
atomic vector, a list-column is created. In all cases,
by_row() and invoke_rows() create a data frame in tidy
format." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">purrrlyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/hadley/purrrlyr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Apply a function to each row of a data frame</h1>
    <small class="dont-index">Source: <a href='https://github.com/hadley/purrrlyr/blob/master/R/rows.R'><code>R/rows.R</code></a></small>
    <div class="hidden name"><code>by_row.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>by_row()</code> and <code>invoke_rows()</code> apply <code>..f</code> to each row
of <code>.d</code>. If <code>..f</code>'s output is not a data frame nor an
atomic vector, a list-column is created. In all cases,
<code>by_row()</code> and <code>invoke_rows()</code> create a data frame in tidy
format.</p>
    </div>

    <pre class="usage"><span class='fu'>by_row</span><span class='op'>(</span>
  <span class='va'>.d</span>,
  <span class='va'>..f</span>,
  <span class='va'>...</span>,
  .collate <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"list"</span>, <span class='st'>"rows"</span>, <span class='st'>"cols"</span><span class='op'>)</span>,
  .to <span class='op'>=</span> <span class='st'>".out"</span>,
  .labels <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span>

<span class='fu'>invoke_rows</span><span class='op'>(</span>
  <span class='va'>.f</span>,
  <span class='va'>.d</span>,
  <span class='va'>...</span>,
  .collate <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"list"</span>, <span class='st'>"rows"</span>, <span class='st'>"cols"</span><span class='op'>)</span>,
  .to <span class='op'>=</span> <span class='st'>".out"</span>,
  .labels <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.d</th>
      <td><p>A data frame.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further arguments passed to <code>..f</code>.</p></td>
    </tr>
    <tr>
      <th>.collate</th>
      <td><p>If "list", the results are returned as a list-
column. Alternatively, if the results are data frames or atomic
vectors, you can collate on "cols" or on "rows". Column collation
require vector of equal length or data frames with same number of
rows.</p></td>
    </tr>
    <tr>
      <th>.to</th>
      <td><p>Name of output column.</p></td>
    </tr>
    <tr>
      <th>.labels</th>
      <td><p>If <code>TRUE</code>, the returned data frame is prepended
with the labels of the slices (the columns in <code>.d</code> used to
define the slices). They are recycled to match the output size in
each slice if necessary.</p></td>
    </tr>
    <tr>
      <th>.f, ..f</th>
      <td><p>A function to apply to each row. If <code>..f</code> does
not return a data frame or an atomic vector, a list-column is
created under the name <code>.out</code>. If it returns a data frame, it
should have the same number of rows within groups and the same
number of columns between groups.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>By default, the whole row is appended to the result to serve as
identifier (set <code>.labels</code> to <code>FALSE</code> to prevent this). In
addition, if <code>..f</code> returns a multi-rows data frame or a
non-scalar atomic vector, a <code>.row</code> column is appended to
identify the row number in the original data frame.</p>
<p><code>invoke_rows()</code> is intended to provide a version of
<code>pmap()</code> for data frames. Its default collation method is
<code>"cols"</code>, which makes it equivalent to
<code>mdply()</code> from the plyr package. Note that
<code>invoke_rows()</code> follows the signature pattern of the
<code>invoke</code> family of functions and takes <code>.f</code> as its first
argument.</p>
<p>The distinction between <code>by_row()</code> and <code>invoke_rows()</code> is
that the former passes a data frame to <code>..f</code> while the latter
maps the columns to its function call. This is essentially like
using <code>invoke()</code> with each row. Another way to view
this is that <code>invoke_rows()</code> is equivalent to using
<code>by_row()</code> with a function lifted to accept dots (see
<code>lift()</code>).</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='by_slice.html'>by_slice()</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># ..f should be able to work with a list or a data frame. As it</span>
<span class='co'># happens, sum() handles data frame so the following works:</span>
<span class='va'>mtcars</span> <span class='op'>%&gt;%</span> <span class='fu'>by_row</span><span class='op'>(</span><span class='va'>sum</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #555555;'># A tibble: 32 x 12</span><span>
#&gt;      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb .out     
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;list&gt;</span><span>   
#&gt; </span><span style='color: #555555;'> 1</span><span>  21       6  160    110  3.9   2.62  16.5     0     1     4     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 2</span><span>  21       6  160    110  3.9   2.88  17.0     0     1     4     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 3</span><span>  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 4</span><span>  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 5</span><span>  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 6</span><span>  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 7</span><span>  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 8</span><span>  24.4     4  147.    62  3.69  3.19  20       1     0     4     2 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 9</span><span>  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'>10</span><span>  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'># … with 22 more rows</span><span></div><div class='input'>
<span class='co'># Other functions such as mean() may need to be adjusted with one</span>
<span class='co'># of the lift_xy() helpers:</span>
<span class='va'>mtcars</span> <span class='op'>%&gt;%</span> <span class='fu'>by_row</span><span class='op'>(</span><span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/lift.html'>lift_vl</a></span><span class='op'>(</span><span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 32 x 12</span><span>
#&gt;      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb .out     
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;list&gt;</span><span>   
#&gt; </span><span style='color: #555555;'> 1</span><span>  21       6  160    110  3.9   2.62  16.5     0     1     4     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 2</span><span>  21       6  160    110  3.9   2.88  17.0     0     1     4     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 3</span><span>  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 4</span><span>  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 5</span><span>  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 6</span><span>  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 7</span><span>  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 8</span><span>  24.4     4  147.    62  3.69  3.19  20       1     0     4     2 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 9</span><span>  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'>10</span><span>  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'># … with 22 more rows</span><span></div><div class='input'>
<span class='co'># To run a function with invoke_rows(), make sure it is variadic (that</span>
<span class='co'># it accepts dots) or that .f's signature is compatible with the</span>
<span class='co'># column names</span>
<span class='va'>mtcars</span> <span class='op'>%&gt;%</span> <span class='fu'>invoke_rows</span><span class='op'>(</span>.f <span class='op'>=</span> <span class='va'>sum</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 32 x 12</span><span>
#&gt;      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb .out     
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;list&gt;</span><span>   
#&gt; </span><span style='color: #555555;'> 1</span><span>  21       6  160    110  3.9   2.62  16.5     0     1     4     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 2</span><span>  21       6  160    110  3.9   2.88  17.0     0     1     4     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 3</span><span>  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 4</span><span>  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 5</span><span>  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 6</span><span>  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 7</span><span>  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 8</span><span>  24.4     4  147.    62  3.69  3.19  20       1     0     4     2 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 9</span><span>  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'>10</span><span>  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'># … with 22 more rows</span><span></div><div class='input'><span class='va'>mtcars</span> <span class='op'>%&gt;%</span> <span class='fu'>invoke_rows</span><span class='op'>(</span>.f <span class='op'>=</span> <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/lift.html'>lift_vd</a></span><span class='op'>(</span><span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 32 x 12</span><span>
#&gt;      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb .out     
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;list&gt;</span><span>   
#&gt; </span><span style='color: #555555;'> 1</span><span>  21       6  160    110  3.9   2.62  16.5     0     1     4     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 2</span><span>  21       6  160    110  3.9   2.88  17.0     0     1     4     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 3</span><span>  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 4</span><span>  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 5</span><span>  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 6</span><span>  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 7</span><span>  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 8</span><span>  24.4     4  147.    62  3.69  3.19  20       1     0     4     2 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 9</span><span>  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'>10</span><span>  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4 </span><span style='color: #555555;'>&lt;dbl [1]&gt;</span><span>
#&gt; </span><span style='color: #555555;'># … with 22 more rows</span><span></div><div class='input'>
<span class='co'># invoke_rows() with cols collation is equivalent to plyr::mdply()</span>
<span class='va'>p</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/expand.grid.html'>expand.grid</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>, sd <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>1</span>, length <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>p</span> <span class='op'>%&gt;%</span> <span class='fu'>invoke_rows</span><span class='op'>(</span>.f <span class='op'>=</span> <span class='va'>rnorm</span>, n <span class='op'>=</span> <span class='fl'>5</span>, .collate <span class='op'>=</span> <span class='st'>"cols"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 50 x 7</span><span>
#&gt;     mean    sd .out1 .out2 .out3 .out4 .out5
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span>     1 0     1      1    1     1      1   
#&gt; </span><span style='color: #555555;'> 2</span><span>     2 0     2      2    2     2      2   
#&gt; </span><span style='color: #555555;'> 3</span><span>     3 0     3      3    3     3      3   
#&gt; </span><span style='color: #555555;'> 4</span><span>     4 0     4      4    4     4      4   
#&gt; </span><span style='color: #555555;'> 5</span><span>     5 0     5      5    5     5      5   
#&gt; </span><span style='color: #555555;'> 6</span><span>     1 0.111 0.844  1.03 0.729 0.999  1.07
#&gt; </span><span style='color: #555555;'> 7</span><span>     2 0.111 2.13   1.80 1.97  1.97   1.97
#&gt; </span><span style='color: #555555;'> 8</span><span>     3 0.111 2.94   3.07 3.23  2.82   3.06
#&gt; </span><span style='color: #555555;'> 9</span><span>     4 0.111 3.79   3.94 3.99  4.06   3.90
#&gt; </span><span style='color: #555555;'>10</span><span>     5 0.111 5.05   5.04 4.86  5.08   5.21
#&gt; </span><span style='color: #555555;'># … with 40 more rows</span><span></div><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='va'>p</span> <span class='op'>%&gt;%</span> <span class='fu'>plyr</span><span class='fu'>::</span><span class='fu'>mdply</span><span class='op'>(</span><span class='va'>rnorm</span>, n <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl_df.html'>tbl_df</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># To integrate the result as part of the data frame, use rows or</span>
<span class='co'># cols collation:</span>
<span class='va'>mtcars</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>%&gt;%</span> <span class='fu'>by_row</span><span class='op'>(</span><span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 32 x 3</span><span>
#&gt;      mpg   cyl .out     
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;list&gt;</span><span>   
#&gt; </span><span style='color: #555555;'> 1</span><span>  21       6 </span><span style='color: #555555;'>&lt;int [5]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 2</span><span>  21       6 </span><span style='color: #555555;'>&lt;int [5]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 3</span><span>  22.8     4 </span><span style='color: #555555;'>&lt;int [5]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 4</span><span>  21.4     6 </span><span style='color: #555555;'>&lt;int [5]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 5</span><span>  18.7     8 </span><span style='color: #555555;'>&lt;int [5]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 6</span><span>  18.1     6 </span><span style='color: #555555;'>&lt;int [5]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 7</span><span>  14.3     8 </span><span style='color: #555555;'>&lt;int [5]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 8</span><span>  24.4     4 </span><span style='color: #555555;'>&lt;int [5]&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 9</span><span>  22.8     4 </span><span style='color: #555555;'>&lt;int [5]&gt;</span><span>
#&gt; </span><span style='color: #555555;'>10</span><span>  19.2     6 </span><span style='color: #555555;'>&lt;int [5]&gt;</span><span>
#&gt; </span><span style='color: #555555;'># … with 22 more rows</span><span></div><div class='input'><span class='va'>mtcars</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>%&gt;%</span> <span class='fu'>by_row</span><span class='op'>(</span><span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>, .collate <span class='op'>=</span> <span class='st'>"rows"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 160 x 4</span><span>
#&gt;      mpg   cyl  .row  .out
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span>    21     6     1     1
#&gt; </span><span style='color: #555555;'> 2</span><span>    21     6     1     2
#&gt; </span><span style='color: #555555;'> 3</span><span>    21     6     1     3
#&gt; </span><span style='color: #555555;'> 4</span><span>    21     6     1     4
#&gt; </span><span style='color: #555555;'> 5</span><span>    21     6     1     5
#&gt; </span><span style='color: #555555;'> 6</span><span>    21     6     2     1
#&gt; </span><span style='color: #555555;'> 7</span><span>    21     6     2     2
#&gt; </span><span style='color: #555555;'> 8</span><span>    21     6     2     3
#&gt; </span><span style='color: #555555;'> 9</span><span>    21     6     2     4
#&gt; </span><span style='color: #555555;'>10</span><span>    21     6     2     5
#&gt; </span><span style='color: #555555;'># … with 150 more rows</span><span></div><div class='input'><span class='va'>mtcars</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>]</span> <span class='op'>%&gt;%</span> <span class='fu'>by_row</span><span class='op'>(</span><span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>, .collate <span class='op'>=</span> <span class='st'>"cols"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 32 x 7</span><span>
#&gt;      mpg   cyl .out1 .out2 .out3 .out4 .out5
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span>  21       6     1     2     3     4     5
#&gt; </span><span style='color: #555555;'> 2</span><span>  21       6     1     2     3     4     5
#&gt; </span><span style='color: #555555;'> 3</span><span>  22.8     4     1     2     3     4     5
#&gt; </span><span style='color: #555555;'> 4</span><span>  21.4     6     1     2     3     4     5
#&gt; </span><span style='color: #555555;'> 5</span><span>  18.7     8     1     2     3     4     5
#&gt; </span><span style='color: #555555;'> 6</span><span>  18.1     6     1     2     3     4     5
#&gt; </span><span style='color: #555555;'> 7</span><span>  14.3     8     1     2     3     4     5
#&gt; </span><span style='color: #555555;'> 8</span><span>  24.4     4     1     2     3     4     5
#&gt; </span><span style='color: #555555;'> 9</span><span>  22.8     4     1     2     3     4     5
#&gt; </span><span style='color: #555555;'>10</span><span>  19.2     6     1     2     3     4     5
#&gt; </span><span style='color: #555555;'># … with 22 more rows</span><span></div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Lionel Henry.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


